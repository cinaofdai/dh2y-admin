I$(109,function(){var e=NEJ.P("nej.e"),s=NEJ.P("nej.ui"),i=NEJ.P("y.ui"),t=NEJ.P("nej.v"),n=e.Fa(".#<uispace>{position:relative;display:block;}.#<uispace> input{border:1px solid #ccc;width:38px;line-height:23px;height:23px;text-align:center;}.#<uispace> input.input-disabled{background:#f5f5f5;color:#ccc;}.#<uispace> span.up,.#<uispace> span.down{cursor:pointer;background:url(/resource/image/detail_mark.png) -9999px -9999px no-repeat;display:block;position:absolute;width:15px;height:13px;left:39px;}.#<uispace> span.up{background-position:-24px -24px;top:0px}.#<uispace> span.down{background-position:-24px -36px;top:12px}.#<uispace> span.up-disabled{background-position:-44px -24px;}.#<uispace> span.down-disabled{background-position:-44px -36px;}.#<uispace> .poptip{left:-72px;top:-40px;position:absolute;display:none;height:28px;border:1px solid #ff7c85;border-radius:2px;padding:0 20px;color:#ff8f96;background:#fff1f1;}.#<uispace> .poptip .content{line-height:29px;}.#<uispace> .poptip-arrow{position: absolute;font-style: normal;font-family:simsun;font-size:12px;top:22px;left:50%;margin-left:-6px;}.#<uispace> .poptip-arrow em,.#<uispace> .poptip-arrow i{position:absolute;left:0;top:0;font-style: normal;font-weight:normal}.#<uispace> .poptip-arrow em{color:#ff7c85;}.#<uispace> .poptip-arrow i{top:-1px;color:#fff1f1;text-shadow:none;}"),a=e.q_('<span class="'+n+'"><span class="mark-tip poptip"><span class="poptip-arrow"><em>◆</em><i>◆</i></span><span class="content">库存不足，请重新选择商品数量</span></span><input class="mark-input"/><span class="up mark-span"></span><span class="down  mark-span"></span></span>');i.B$=NEJ.C();R$=i.B$.Co(s.xu,!0);R$.Po=function(e){e=e||{};e.parent=e.parent||document.body;this.Au=n;this.Pu=a;this.ku=e.parent;this.U$=e.changeNumCallBack;this.Np=e.range||[0,999];this.Np[1]=this.Np[0]>this.Np[1]?this.Np[0]:this.Np[1];this.Q_=e.disabled||!1;this.Ao(e);this.q$(e);this.J$(e)};R$.q$=function(t){e.$a(this.Iu,"mark-input")[0].value=t.num||1};R$.J$=function(){var i=e.$a(this.Iu,"mark-span"),n=e.$a(this.Iu,"mark-input")[0];t.Pa(n,"change",this.H$._n(this,i));t.Pa(n,"keydown",this.z$._n(this));t.Pa(i[1],"click",this.W$._n(this,n,i));t.Pa(i[0],"click",this.V$._n(this,n,i));this.X$(n,i[1],i[0])};R$.G$=function(t,a){var i=0==t||!!t;if(i&&t>=this.Np[0]&&t<=this.Np[1])i=!0;else{var s=e.$a(this.Iu,"mark-input")[0];if(t>this.Np[1]){s.value=this.Np[1];var n=e.$a(this.Iu,"mark-tip")[0];if($){$(n).css({display:"block"});window.setTimeout(function(){$(n).animate({opacity:0},300,function(){$(this).css({display:"none",opacity:1})})},5e3)}else{n.style.display="block";window.setTimeout(function(){n.style.display="none"},5e3)}}else s.value=this.Np[0];this.X$(s,a[1],a[0]);i=!1}return i&&!this.Q_};R$.V$=function(i,n){t.ho(arguments[2]);var e=parseInt(i.value);if(e<=this.Np[1]&&this.G$(e+1,n)){i.value=e+1;if(this.U$)this.U$(this,e+1);this.X$(i,n[1],n[0])}};R$.W$=function(i,n){t.ho(arguments[2]);var e=parseInt(i.value);if(e>=this.Np[0]&&this.G$(e-1,n)){i.value=e-1;if(this.U$)this.U$(this,e-1);this.X$(i,n[1],n[0])}};R$.z$=function(){var e=arguments[0];if(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||8==e.keyCode||9==e.keyCode)return!0;else{t.ho(e);return!1}};R$.H$=function(e){var s=arguments[1],i=t.co(s),n=i.value;if(this.G$(n,e))this.X$(i,e[1],e[0]);if(this.U$)this.U$(this,n)};R$.X$=function(t,i,n){var s=t.value;e.Za(i,"down-disabled");e.Za(n,"up-disabled");if(this.Q_||s<=this.Np[0])e.Ba(i,"down-disabled");if(this.Q_||s>=this.Np[1])e.Ba(n,"up-disabled");if(this.Q_){e.Ba(t,"input-disabled");t.setAttribute("disabled","disabled")}};R$.K$=function(){return parseInt(e.$a(this.Iu,"mark-input")[0].value)}},79);I$(110,function(){var s=NEJ.P("y.m"),a=NEJ.P("y.ut"),_=NEJ.P("y.ui"),o=NEJ.P("nej.ut"),e=NEJ.P("nej.e"),t=NEJ.P("nej.v"),r=NEJ.P("nej.u"),n=NEJ.P("ys.ui"),i=(NEJ.P("y.ui"),NEJ.P("nej.j")),l=NEJ.P("ys.m");s.Q$=NEJ.C();P$=s.Q$.Co(l.gu);P$.Po=function(e){this.Ao(e);this.j$(e);this.q$(e);this.Y$(e);if(1==this.Z$.length&&1==this.Z$[0].ll().length)this.Z$[0].tl(0);this.bu("/resource/flash/logo2.swf")};P$.j$=function(){this.eg=window["g_product"];this.tg=this.eg.skuMap;this.Z$=[];this.ig=[];this.ng=[];this.sg=null;e.R_("template_list")};P$.Y$=function(){this.og();this.rg();this.lg();this.dg();this.ug(!0);var i=[e.vs("d-buy-btn"),e.vs("p-cart-btn"),e.vs("p-cart1-btn")];t.Pa(i[0],"click",this.cg._n(this));t.Pa(i[1],"click",this.hg._n(this));t.Pa(i[2],"click",this.hg._n(this));var n=$("#tip-0");n.css({height:n.parent().height()+58});n.find("span.close").click(function(){$(this).parent().animate({opacity:0},300,function(){e.Za(i[0],"btn-disabled-1 btn-2");e.Za(i[1],"btn-disabled-1 btn-2");e.Za(i[2],"btn-disabled-1 btn-2");$(this).css({display:"none"})})});$(window).scroll(this.fg._n(this));$("#back-top").on("click",function(){$("html, body").animate({scrollTop:0},400)})};P$.cg=function(a){var s=t.co(a);i.C_("/u/username.json",{query:{},type:"json",onload:function(t){if(t&&t.userName&&""!=t.userName){if(!e.ma(s,"btn-disabled")&&this.pg(s)){var i=this.$g.K$();if(i&&i>0)window.location.href="/cart/dbuy?skuId="+this.sg.id+"&num="+i}}else n.ef.Ko({parent:document.body}).Mu()}._n(this)})};P$.hg=function(a){var s=t.co(a);i.C_("/u/username.json",{query:{},type:"json",onload:function(t){if(t&&t.userName&&""!=t.userName){if(!e.ma(s,"btn-disabled")&&this.pg(s)){var a=this.$g.K$();if(a&&a>0)i.C_("/cart/addToCart.json",{query:{skuId:this.sg.id,num:a},type:"json",onload:function(e){if(e&&e.result)n.yp.qo({parent:document.body,onOKCallBack:null}).Mu();else n.xf.qo({parent:document.body,wd:"放入购物车失败，请稍后再试!",onOKCallBack:null}).Mu()}._n(this)})}}else n.ef.Ko({parent:document.body}).Mu()}._n(this)})};P$.fg=function(i){i.preventDefault();var t=$("#detail-nav").parent(),n=$("#back-top"),s=$("html").scrollTop()||$("body").scrollTop(),e=$("#p-cart1-btn");if(s>=t.parent().offset().top){t.css({position:"fixed",opacity:1});if(0==e.css("opacity"))e.animate({opacity:1},300)}else{t.css({position:"relative",opacity:1});if(1==e.css("opacity"))e.animate({opacity:0},300);n.css({display:"none"})}return!1};P$.q$=function(){this.gg()};P$.vg=function(){var s=e.vs("uc-w-pager"),n=e.$a(s,"mark-li");if(n&&n.length>0&&!this.yg){var r=n.pop(),o=e.$a(r,"mark-input"),_=s.getAttribute("data-limit");this.yg=a.pp.qo({pbtn:n.shift(),nbtn:n.pop(),list:n,index:1,total:s.getAttribute("data-total"),selected:"sel",onchange:function(n){$("html, body").animate({scrollTop:$("#detail-c").offset().top-50},400);var a=e.vs("comments"),s=e.$a(a,"mark-loading")[0],t=e.$a(a,"mark-ul")[0];e.Za(s,"f-dn");e.Ba(t,"f-dn");if(!this.ig[n.index])i.C_("/webComment/getListByProdId.json",{query:{prodId:this.eg.id,pageIndex:n.index,pageSize:_},type:"json",onload:function(i){if(i&&i.result){console.log(i);this.ig[n.index]=i.value;e.Ba(s,"f-dn");e.Aa(t,!1);this.bg(i.value)}else if(t){e.Ba(s,"f-dn");e.Za(t,"f-dn")}}._n(this)});else{e.Aa(t,!1);e.Ba(s,"f-dn");this.bg(this.ig[n.index])}}._n(this)});t.Pa(o[0],"keydown",this.xg._n(this));t.Pa(o[1],"click",function(e){this.yg.lp(e.value)}._n(this,o[0]))}};P$.bg=function(i){var n=e.vs("comments"),t=e.qa(e.No("jst-tpl-3",{prodComments:i}));$(t).find("li.mark-li").click(function(){var e=$(this).parent().next("div").find(".v-img img");if($(this).hasClass("sel")){$(this).removeClass("sel");e.animate({width:0,height:0},function(){e.parent().addClass("v-img-hide");e.attr({src:""})})}else{$(this).prevAll(".sel").removeClass("sel");$(this).nextAll(".sel").removeClass("sel");$(this).addClass("sel");var t=new Image;if(!e.attr("src"))e.css({width:0,height:0});$(t).on("load",function(){e.parent().removeClass("v-img-hide");e.attr({src:$(this).attr("src")});e.animate({width:$(this)[0].width+"px",height:$(this)[0].height+"px"})});t.src=$(this).attr("data-src")+"?imageView&thumbnail=260x0"}});$(t).find(".v-img img").click(function(){$(this).animate({width:0,height:0},function(){var e=$(this).parent();e.addClass("v-img-hide");$(this).attr({src:""});e.parent().prev("ul").find("li.sel").removeClass("sel")})});n.appendChild(t)};P$.Cg=function(){var s=e.vs("sr-w-pager"),n=e.$a(s,"mark-li");if(n&&n.length>0&&!this.Eg){var r=n.pop(),o=e.$a(r,"mark-input"),_=s.getAttribute("data-limit");this.Eg=a.pp.qo({pbtn:n.shift(),nbtn:n.pop(),list:n,index:1,total:s.getAttribute("data-total"),selected:"sel",onchange:function(t){$("html, body").animate({scrollTop:$("#detail-c").offset().top-50},400);var s=e.vs("records"),n=e.$a(s,"mark-tbody")[0];e.Ba(n,"tb-hide");if(!this.ng[t.index])i.C_("/prod/srecords.json",{query:{productId:this.eg.id,pageIndex:t.index,limit:_},type:"json",onload:function(i){if(i&&i.websrList&&i.websrList.length>0){console.log(i);this.ng[t.index]=i.websrList;e.Aa(n.parentNode,!1);this.Ng(i.websrList)}else e.Za(n,"tb-hide")}._n(this)});else{e.Aa(n.parentNode,!1);this.Ng(this.ng[t.index])}}._n(this)});t.Pa(o[0],"keydown",this.xg._n(this));t.Pa(o[1],"click",function(e){this.Eg.lp(e.value)}._n(this,o[0]))}};P$.Ng=function(t){var i=e.vs("records"),n=e.qa(e.No("jst-tpl-4",{records:t}));i.appendChild(n)};P$.xg=function(){var e=arguments[0];if(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||8==e.keyCode||9==e.keyCode)return!0;else{t.ho(e);return!1}};P$.gg=function(){var t=i.hs("browseHistory")||"",n=t?t.split(","):[];if(t.indexOf(this.eg.id)<0){if(n.length>6)for(var s=0;s<n.length-6;s++)n.shift();n.push(this.eg.id);t=n.join(",");i.hs("browseHistory",{value:t,expires:90})}if(n.length>1)i.C_("/prod/history.json",{query:{historyPids:t},type:"json",onload:function(t){if(t&&t.historyPids)e.vs("hp-container").appendChild(e.qa(e.No("jst-tpl-2",{historyPids:t.historyPids,cpid:this.eg.id})))}._n(this)})};P$.pg=function(t){if(this.sg)return!0;else{if(e.ma(t,"p-cart-1"))$("html, body").animate({scrollTop:0},400);if(e.ma(t,"p-cart"))e.Ba(e.vs("p-cart1-btn"),"btn-2");e.Ba(t,"btn-2");if(t.previousSibling&&1==t.previousSibling.nodeType)e.Ba(t.previousSibling,"btn-disabled-1");if(t.nextSibling&&1==t.nextSibling.nodeType&&!e.ma(t.nextSibling,"btn-2"))e.Ba(t.nextSibling,"btn-disabled-1");$("#tip-0").css({display:"block"}).animate({opacity:1},300);
return!1}};P$.ug=function(i){var t=e.vs("adder"),n=parseInt(e.vs("volumn").innerHTML);t.innerHTML="";this.$g=_.B$.qo({range:[1,n],disabled:i,num:t.getAttribute("data-num"),parent:t});this.$g.Mu()};P$.og=function(){var i=e.vs("thumbnails"),t=e.$a(i,"mark-span");if(t.length>0)o.X_.qo({list:t,selected:"sel",index:-1,event:"mouseover",onchange:function(i,n){var t=e.Ra(i[n.index],"pp");if(t)e.vs("big-img").src=t}._n(this,t)})};P$.lg=function(){var t=e.$a(e.vs("package-nav"),"mark-li");if(t&&t.length>1){o.X_.qo({list:t,selected:"sel",index:0,onchange:function(s,n){for(var i=e.$a(e.vs("package-c"),"mark-package"),t=0;t<i.length;t++){e.Ba(i[t],"f-dn");if(t==n.index)e.Za(i[t],"f-dn")}}._n(this,t)});for(var s=e.vs("package-c"),i=e.$a(s,"mark-view"),n=0;n<i.length;n++)this.wg(i[0])}};P$.dg=function(){var i=e.vs("detail-nav"),t=i.getElementsByTagName("li");if(t.length>1)o.X_.qo({list:t,selected:"sel",index:0,onchange:function(s,i){for(var n=e.$a(e.vs("detail-c"),"mark-div"),t=0;t<n.length;t++){e.Ba(n[t],"f-dn");if(t==i.index)e.Za(n[t],"f-dn")}if(1==i.index)this.vg();else if(2==i.index)this.Cg()}._n(this,t)})};P$.wg=function(n){var i=e.$a(n,"mark-span"),s=e.$a(n,"mark-units")[0];if(i.length>1){t.Pa(i[0],"click",this.Sg._n(this,s,-1));t.Pa(i[1],"click",this.Sg._n(this,s,1))}};P$.Sg=function(t,s){var i=Math.abs(parseInt(e.Na(t,"margin-left"))),a=e.$a(t,"mark-unit"),n=parseInt(t.getAttribute("data-distance")),o=parseInt(t.getAttribute("data-startnum"));kg=n*(a.length-o);if(0>s){if(i>=kg)return null;else if(!this.Ig)this.Tg({offset:i},{offset:i+n},300,function(e){t.style.marginLeft=0-e.offset+"px"})}else if(!this.Ig&&i>0)this.Tg({offset:i},{offset:i-n},300,function(e){t.style.marginLeft=0-e.offset+"px"});else return null};P$.Tg=function(e,t,i,n){this.Ig=null;var s={from:e,to:t,duration:i,onupdate:n,onstop:function(){this.Ig=nej.ut.Sl.Wo(this.Ig)}._n(this)};this.Ig=nej.ut.Sl.qo(s);this.Ig.gl();return this.Ig};P$.rg=function(){var t=e.vs("selects"),i=e.$a(t,"mark-tabs");if(i.length>0){this.Pg=[];for(var n=0;n<i.length;n++)this.Pg[n]=e.$a(i[n],"mark-li");r.On(this.Pg,function(i,n){this.Z$[n]=a.vp.qo({list:i,selected:"sel",disabled:"disabled",index:-1,onchange:function(){var a=e.$a(t,"sel"),i=this.jg(t,a);if(i){if(i.picUrl&&""!=i.picUrl)e.vs("big-img").src=i.picUrl+"?imageView&thumbnail=358y358";e.vs("d-price").innerHTML=e.No("jst-tpl-0",{sku:i});e.vs("volumn").innerHTML=i.sellVolume;if(i.skuPromotion)e.vs("promotions").innerHTML=e.No("jst-tpl-1",{promotion:i.skuPromotion});else e.vs("promotions").innerHTML="";var n=[e.vs("d-buy-btn"),e.vs("p-cart-btn"),e.vs("p-cart1-btn"),e.vs("outsell-btn")];if(i.sellVolume>0){this.ug();e.Za(e.vs("p-num"),"f-dn");e.Za(n[0],"btn-disabled");e.Za(n[1],"btn-disabled");e.Za(n[2],"btn-disabled")}else;e.Za(n[0],"btn-disabled-1 btn-2");e.Za(n[1],"btn-disabled-1 btn-2");this.sg=i;var s=$("#tip-0");if("none"!=s.css("display"))s.find("span.close").click()}else{this.sg=null;this.ug(!0)}}._n(this,n,i)})},this);if(1==i.length)this.jg(t,[])}else this.og()};P$.jg=function(u,s){var c=e.$a(u,"mark-tabs");if(1==c.length&&0==s.length)for(var i=[],a=null,n=0;n<this.Pg[0].length;n++){i[0]=this.Pg[0][n];a=this.Ag(i);if(!a.valid||a.sellVolume<=0)e.Ba(this.Pg[0][n],"disabled");else e.Za(this.Pg[0][n],"disabled")}else if(s.length==this.Pg.length){for(var t=0;t<this.Pg.length;t++)for(var i=this.Lg(s),a=null,o=0;o<this.Pg[t].length;o++)if(s[t]!=this.Pg[t][o]){i[t]=this.Pg[t][o];a=this.Ag(i);if(!a.valid||a.sellVolume<=0)e.Ba(this.Pg[t][o],"disabled");else e.Za(this.Pg[t][o],"disabled")}else;return this.Ag(s)}else if(s.length<=this.Pg.length-1){r.On(e.$a(u,"disabled"),function(t){e.Za(t,"disabled")},this);if(s.length==this.Pg.length-1){for(var _="",t=0;t<this.Pg.length;t++)for(var d=0;d<s.length&&""==_;d++)if(this.Pg[t][0].parentNode!=s[d].parentNode){_=this.Pg[t];break}for(var l=0;l<_.length;l++){var a,i=this.Lg(s);i.push(_[l]);for(var n=0;n<i.length-1;n++)if(i[n].getAttribute("data-index")>i[n+1].getAttribute("data-index")){var h=i[n];i[n]=i[n+1];i[n+1]=h}a=this.Ag(i);if(!a.valid||a.sellVolume<=0)e.Ba(_[l],"disabled");else e.Za(_[l],"disabled")}}return null}else return null};P$.Lg=function(t){for(var i=[],e=0;e<t.length;e++)i[e]=t[e];return i};P$.Ag=function(t){for(var i="",e=0;e<t.length;e++)i+=t[e].getAttribute("data-id")+";";return this.tg[i]};s.Q$.Ko()},1,2,3,4,5,6,7,107,108,109,8,9,102);