I$(139,function(){var e,t=NEJ.P,n=t("ys.m"),i=(t("ys.ui"),t("nej.ut"),t("nej.u")),s=t("nej.e"),a=(t("nej.v"),t("nej.j"));n.Zv=NEJ.C();e=n.Zv.Co(n.um);e.zo=function(e){e.productList=window["g_productList"]||[];this.Lo(e);this.ey=window["g_selectedSiftItemList"]||[];this.ty=window["g_categoryId"];this.iy=window["g_sortType"];if(this.ey&&this.ey.length>0)this.ny();this.Eu()};e.ny=function(){var e=[];i.On(this.ey,function(t){var n=t.name.split("#####"),s=!1;i.On(e,function(e){if(e.siftId==t.siftId){e.siftItemNames.push(n[1]);e.siftItemIds.push(t.id);s=!0}});if(0==e.length||!s)e.push({siftName:n[0],siftId:t.siftId,siftItemNames:[n[1]],siftItemIds:[t.id],href:"",siftItemName:""})});i.On(e,function(e){var t=[],n=this.ey;i.On(n,function(n){if(-1==i.An(e.siftItemIds,n.id))t.push(n.id)});e.href=t.join("_");e.siftItemName=e.siftItemNames.join(",")}._n(this));s.So("siftitem-selected-box","jst-tpl-1",{data:e,categoryId:this.ty,sortType:this.iy})};e.Eu=function(){this.sy();this.gg();$("#sift .select").on("click",this.oy._n(this,"selectMore"));$("#sift .ccbtn").on("click",this.oy._n(this,""));$("#sift .extra").on("click",this.ry._n(this,"extra"));$("#sift .showall").on("click",this.ry._n(this,""));$("#sift .z-fieldsbox .isift").on("click",this.ly._n(this));$("#sift .okbtn").on("click",this.dy._n(this))};e.oy=function(e,t){$("#sift").find(".fields").removeClass("f-dn").end().find(".fields1").addClass("f-dn");if("selectMore"==e)$(t.currentTarget).closest(".group").find(".fields").addClass("f-dn").end().find(".fields1").removeClass("f-dn")};e.ry=function(i,n){var e=$(n.currentTarget),t=null;switch(i){case"extra":if(e.hasClass("extra-fold")){e.closest(".m-sift").find(".z-group").removeClass("f-dn");e.removeClass("extra-fold");this.sy()}else{e.addClass("extra-fold");e.closest(".m-sift").find(".z-group").addClass("f-dn")}break;default:t=e.closest(".fields");if(t.hasClass("fields-fold"))t.removeClass("fields-fold");else t.addClass("fields-fold")}};e.ly=function(n){var e=$(n.currentTarget),t=e.closest(".z-fieldsbox"),i=t.find(".okbtn");e.hasClass("isift-selected")?e.removeClass("isift-selected"):e.addClass("isift-selected");0===t.find(".isift-selected").length?i.addClass("okbtn-disable"):i.removeClass("okbtn-disable")};e.dy=function(i){var n=$(i.currentTarget),e=$("#sift .z-fieldsbox .isift-selected"),t=[];if(!n.hasClass("okbtn-disable")&&e.length>0){$.each(e,function(i,e){t.push($(e).data("id"))});window.location.href="/list/"+this.ty+"/"+this.iy+"/"+t.join("_")}};e.sy=function(){$(".group").each(function(s,i){var e=$(i),n=e.find(".z-slist").width(),t=0;if(!e.hasClass("f-dn")){e.find(".siftwrap").each(function(i,e){t+=$(e).outerWidth()});if(t>n)e.find(".showall").removeClass("f-dn")}})};e.gg=function(){var t=a.hs("browseHistory")||"",e=t?t.split(","):[];!!e&&e.length>6&&e.shift();if(e&&e.length>0)a.C_("/prod/history.json",{query:{historyPids:e.join(",")},type:"json",onload:function(e){if(e&&e.historyPids&&e.historyPids.length>0){s.So(s.$a("browse-box","boxwrap")[0],"jst-tpl-2",{data:e.historyPids});s.Za("browse-box","f-dn")}}._n(this)})};n.Zv.Ko()},138);